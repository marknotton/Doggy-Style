$devices : mobile tablet desktop;

@mixin devices($args...) {

  // This checks to see if the current selector is html.
  // This can not be converted into a shorthanded if statement.
  $selector : to-string(#{&});
	$space : ' ';

	@if (str-index($selector, 'html')) {
		$selector : string-replace(#{$selector}, 'html', '');
		@if ($selector != 'html') {
			$space : '';
		}
	}

  @each $settings in _arglist-to-list($args...) {

    $devices-list : ();
    $not : true;

    @each $setting in $settings {
      @if is-string($setting) {
        @if contains($devices, $setting) and length($devices-list) < 2 {
          $devices-list : append($devices-list, $setting);
        }
      } @elseif is-bool($setting) {
        $not : $setting;
      }
    }

    // @if length($devices-list) > 1 and length($types-list) > 0 {
    //   @error 'You can not check the same version for 2 browsers in a single argument. Try seperating the arguments using a comma (,)';
    // } @else {
      @if length($devices-list) > 0 {
        @each $device in $devices-list {
          @if $not {
            @at-root html[data-device="#{$device}"]#{$space}#{$selector}{ @content; }
          } @else {
            @at-root html:not([data-device="#{$device}"])#{$space}#{$selector}{ @content; }
          }
        }
      }
    // }
  }
}

// Usage : @include mobile { ... }
// Usage : @include mobile(samgsung) { ... }

@mixin mobile($type:null) {
  @include devices(mobile $type) { @content };
}

@mixin tablet($type:null) {
  @include devices(tablet $type) { @content };
}

@mixin desktop($type:null) {
  @include devices(desktop $type) { @content };
}

@mixin not-mobile($type:null) {
  @include devices(mobile $type false) { @content };
}

@mixin not-tablet($type:null) {
  @include devices(tablet $type false) { @content };
}

@mixin not-desktop($type:null) {
  @include devices(desktop $type false) { @content };
}


/// Add specical styling for specific classes that sit on the body of the page.
/// for example, iphone devices specifcally.
/// @todo Add checks and validation
@mixin identify($class) {

  $selector : null;
  @if not is-selector(html) and not is-selector(body){ $selector : &; }

  @at-root body.#{$class} #{$selector} { @content }
}
